# Docker Compose Environment Variables
#
# This .env file is used by docker-compose directly when running 'docker-compose up'
# It provides environment variables for all services defined in docker-compose.yml
# This is the PRIMARY configuration file for local development with Docker
#
# This .env.example file serves as a template for the actual .env file
# Copy this file to .env and replace the placeholder values with your actual configurations
# IMPORTANT: Never commit your actual .env file to version control

# Database configuration
# Note: SSL is enabled with certificate verification (sslmode=verify-ca) for GDPR compliance and data security
# This requires SSL certificates to be generated with config/ssl/postgres/create-certs.sh
# For Docker container connections:
DB_DSN=postgres://postgres:${POSTGRES_PASSWORD}@postgres:5432/postgres?sslmode=require
POSTGRES_PASSWORD=your_secure_db_password

# Server configuration
PORT=8080
LOG_LEVEL=debug
LOG_TEXTLOGGING=true
DB_DEBUG=true
ENABLE_CORS=true

# CORS Security Configuration
# Leave empty to allow all origins (development only!)
# For production, set to comma-separated list of allowed origins:
# CORS_ALLOWED_ORIGINS=http://localhost:3000,https://yourdomain.com
CORS_ALLOWED_ORIGINS=

# Rate Limiting Configuration
# Enable rate limiting to prevent abuse and brute force attacks
RATE_LIMIT_ENABLED=false
# General API rate limits (requests per minute)
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST=10
# Stricter limits for authentication endpoints
RATE_LIMIT_AUTH_REQUESTS_PER_MINUTE=5

# Security Logging Configuration
# Enable logging of security events (auth failures, rate limits, etc.)
SECURITY_LOGGING_ENABLED=false

# Authentication (use strong random strings in production)
AUTH_JWT_SECRET=your_jwt_secret_at_least_32_chars_long
AUTH_JWT_EXPIRY=15m
AUTH_JWT_REFRESH_EXPIRY=1h

# Frontend configuration
NEXT_PUBLIC_API_URL=http://server:8080
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your_nextauth_secret_at_least_32_chars

# Admin Account (for initial setup)
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=your_secure_admin_password_here

# Development flags
SKIP_ENV_VALIDATION=true
NEXT_TELEMETRY_DISABLED=1

# Docker BuildKit Configuration (speeds up builds)
DOCKER_BUILDKIT=1
COMPOSE_DOCKER_CLI_BUILD=1
