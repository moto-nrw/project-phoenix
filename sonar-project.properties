# SonarCloud CI-based Analysis Configuration
# This file is used by SonarScanner in GitHub Actions

sonar.projectKey=moto-nrw_project-phoenix
sonar.organization=moto-nrw

# Sources (use . for project root, paths in coverage are relative to root)
sonar.sources=.

# Tests
sonar.tests=.
sonar.test.inclusions=**/*_test.go,**/*.test.ts,**/*.test.tsx,**/*.spec.ts

# Coverage Reports
sonar.go.coverage.reportPaths=backend/coverage.out
sonar.javascript.lcov.reportPaths=frontend/coverage/lcov.info,betterauth/coverage/lcov.info

# Exclusions (minimal - only non-code folders)
# Also exclude .sql files - SonarCloud doesn't support PostgreSQL, only Oracle PL/SQL
sonar.exclusions=**/node_modules/**,**/.next/**,**/openspec/**,**/docs/**,**/templates/**,**/*.sql

# Coverage exclusions - non-production code that shouldn't affect coverage metrics
# - backend/test/**: Test helpers/fixtures (not *_test.go but pure test infrastructure)
# - backend/database/database_config.go: Environment-based DSN selection with log.Fatal() branch
# - backend/database/db.go: DB connection boilerplate (implicitly tested by integration tests)
# - backend/database/migrations/**: Database DDL (validated by migration framework, not unit tests)
# - backend/seed/**: Development fixture data (implicitly tested when app starts)
# - backend/simulator/**: IoT simulator for demos/testing (dev tool, not production code)
# - **/*.config.js, **/*.config.ts: Configuration files (not executable business logic)
# - frontend/src/test/**: Test setup and mocks (test infrastructure, not production code)
sonar.coverage.exclusions=backend/test/**,backend/database/database_config.go,backend/database/db.go,backend/database/migrations/**,backend/seed/**,backend/simulator/**,**/*.config.js,**/*.config.ts,**/e2e/**,frontend/src/test/**

# Duplication exclusions - test files have intentionally similar patterns
sonar.cpd.exclusions=**/*_test.go,backend/test/**

# Encoding
sonar.sourceEncoding=UTF-8
