# SonarCloud CI-based Analysis Configuration
# This file is used by SonarScanner in GitHub Actions

sonar.projectKey=moto-nrw_project-phoenix
sonar.organization=moto-nrw

# Sources (use . for project root, paths in coverage are relative to root)
sonar.sources=.

# Tests
sonar.tests=.
sonar.test.inclusions=**/*_test.go,**/*.test.ts,**/*.test.tsx

# Coverage Reports
sonar.go.coverage.reportPaths=backend/coverage.out
sonar.javascript.lcov.reportPaths=frontend/coverage/lcov.info

# Exclusions (minimal - only non-code folders)
sonar.exclusions=**/node_modules/**,**/.next/**,**/openspec/**,**/docs/**,**/templates/**

# Coverage exclusions - test infrastructure and database bootstrapping
# - backend/test/**: Test helpers/fixtures (not *_test.go but pure test code)
# - backend/database/database_config.go: Environment-based DSN selection with log.Fatal() branch (untestable)
# - backend/database/db.go: DB connection boilerplate (implicitly tested by all integration tests)
sonar.coverage.exclusions=backend/test/**,backend/database/database_config.go,backend/database/db.go

# Duplication exclusions - test files have intentionally similar patterns
sonar.cpd.exclusions=**/*_test.go,backend/test/**

# Disable PL/SQL analyzer for .sql files (we use PostgreSQL, not Oracle)
# Redirect .sql to T-SQL analyzer (no Data Dictionary warning)
sonar.tsql.file.suffixes=sql,tsql
sonar.plsql.file.suffixes=pks,pkb

# Encoding
sonar.sourceEncoding=UTF-8
