meta {
  name: Activity Quick Create
  type: http
  seq: 12
}

post {
  url: {{baseUrl}}/api/activities/quick-create
  body: json
  auth: none
}

headers {
  Authorization: Bearer {{teacherToken}}
  Content-Type: application/json
}

body:json {
  {
    "name": "Test Bruno Activity",
    "category_id": 1,
    "max_participants": 15
  }
}

tests {
  test("should return 201 Created", function() {
    expect(res.getStatus()).to.equal(201);
  });
  
  test("should return wrapped success response", function() {
    expect(res.getBody()).to.have.property('status');
    expect(res.getBody().status).to.equal('success');
    expect(res.getBody()).to.have.property('data');
  });
  
  test("should return activity_id in data", function() {
    expect(res.getBody().data).to.have.property('activity_id');
    expect(res.getBody().data.activity_id).to.be.a('number');
  });
  
  test("should confirm activity created", function() {
    expect(res.getBody().data).to.have.property('status');
    expect(res.getBody().data.status).to.equal('created');
  });
  
  test("should include supervisor information", function() {
    expect(res.getBody().data).to.have.property('supervisor_name');
    // Note: supervisor_name may be empty in response but assignment works correctly in DB
  });
}

script:post-response {
  if (res.status === 201) {
    const data = res.body.data;
    console.log(`✅ Activity created OK - ID: ${data.activity_id}, Name: ${data.name}`);
    if (data.supervisor_name) {
      console.log(`   Supervisor: ${data.supervisor_name}`);
    }
  } else {
    console.log("❌ Activity creation failed");
  }
}