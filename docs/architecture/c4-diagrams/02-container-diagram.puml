@startuml Project Phoenix - Container Diagram (C4 Level 2)
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

title Project Phoenix - Container Diagram

Person(user, "User", "Teacher, Admin, or Guardian")
System_Ext(rfid, "RFID Reader", "Physical RFID hardware")

System_Boundary(phoenix, "Project Phoenix") {
    Container(frontend, "Frontend Web Application", "Next.js 15, React 19, TypeScript", "Provides web UI for users to manage students, groups, and view real-time attendance")
    Container(backend, "Backend API", "Go 1.23+, Chi Router, BUN ORM", "Handles business logic, authentication, and data persistence. Provides RESTful API and SSE for real-time updates")
    ContainerDb(database, "Database", "PostgreSQL 17+", "Stores user data, groups, attendance records across 11 schemas (auth, users, education, active, etc.)")
}

Rel(user, frontend, "Uses", "HTTPS")
Rel(rfid, backend, "Sends check-in/out events", "HTTPS/JSON (Device API Key + PIN)")
Rel(frontend, backend, "Makes API calls", "HTTPS/JSON (JWT)")
Rel(frontend, backend, "Subscribes to events", "SSE")
Rel(backend, database, "Reads/Writes data", "PostgreSQL Protocol, SSL")

note right of backend
  **Backend Services:**
  - JWT Authentication (15min access, 1hr refresh)
  - Permission-based authorization
  - Real-time SSE hub for supervisor updates
  - Automated GDPR data cleanup (daily 2:00 AM)
  - RFID device integration (2-layer auth)
end note

note right of frontend
  **Frontend Features:**
  - 33 pages (App Router)
  - 124 API route handlers (proxy layer)
  - Real-time dashboard with SSE
  - NextAuth.js session management
  - Type-safe TypeScript with Zod validation
end note

note right of database
  **11 PostgreSQL Schemas:**
  auth, users, education, facilities,
  activities, active, schedule, iot,
  feedback, config, audit
end note

SHOW_LEGEND()
@enduml
